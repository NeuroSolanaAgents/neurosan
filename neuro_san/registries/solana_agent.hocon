# NeuroSanSolana - Solana Blockchain Agent Network
# Privacy Hack Submission - solana.com/privacyhack
# 
# A privacy-preserving AI agent that queries Solana blockchain data
# while keeping wallet addresses hidden from the LLM context.

{
    "metadata": {
        "description": "Privacy-preserving Solana blockchain agent - wallet addresses never exposed to AI"
        "tags": ["solana", "blockchain", "privacy-hack", "web3", "defi"],
        "sample_queries": [
            "What is my SOL balance?",
            "Show me my token holdings",
            "What are my recent transactions?",
            "List my NFTs"
        ]
    },
    
    # Using Claude 3 Haiku for fast, efficient responses
    "llm_config": {
        "model_name": "claude-3-haiku",
    },
    
    "tools": [
        # ==============================================
        # FRONT-MAN AGENT - Handles all user interactions
        # ==============================================
        {
            "name": "solana_agent",
            
            "function": {
                "description": """
I am a privacy-preserving Solana assistant. I can:
- Query SOL and token balances
- View transaction history  
- Discover NFTs in your wallet

Your wallet address is kept PRIVATE via the sly_data channel - I perform queries without ever seeing your address in my context.
""",
                # Schema for private wallet input
                "sly_data_schema": {
                    "type": "object",
                    "properties": {
                        "wallet_pubkey": {
                            "type": "string",
                            "description": "Solana wallet public key (base58) - kept private from AI"
                        },
                        "rpc_url": {
                            "type": "string", 
                            "description": "Optional: Custom RPC endpoint (default: mainnet)"
                        }
                    },
                    "required": ["wallet_pubkey"]
                }
            },
            
            "instructions": """
You are a helpful, privacy-focused Solana blockchain assistant.

IMPORTANT - PRIVACY RULES:
1. The wallet address is ALREADY provided via sly_data - you have access to it
2. NEVER ask the user for their wallet address
3. NEVER expose or mention the wallet address in your responses
4. Simply use the appropriate tool to fulfill the user's request

TOOL USAGE:
- For SOL balance: use balance_tool
- For token holdings: use token_tool  
- For transaction history: use transaction_tool
- For NFT discovery: use nft_tool

Always respond with clear, well-formatted information. Use markdown for readability.
""",
            
            # Allow results to flow upstream privately
            "allow": {
                "to_upstream": {
                    "sly_data": ["balance_result", "tokens_result", "tx_result", "nft_result"]
                }
            },
            
            "tools": ["balance_tool", "token_tool", "transaction_tool", "nft_tool"]
        },
        
        # ==============================================
        # CODED TOOLS - Blockchain query implementations
        # ==============================================
        
        # SOL Balance Tool
        {
            "name": "balance_tool",
            "function": {
                "description": "Fetches the SOL balance for the wallet",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "rpc_url": {
                            "type": "string",
                            "description": "Solana RPC endpoint (default: mainnet)"
                        }
                    }
                }
            },
            "class": "solana.balance.GetBalance"
        },
        
        # SPL Token Balances Tool
        {
            "name": "token_tool",
            "function": {
                "description": "Fetches all SPL token balances for the wallet",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "rpc_url": {
                            "type": "string",
                            "description": "Solana RPC endpoint (default: mainnet)"
                        }
                    }
                }
            },
            "class": "solana.tokens.GetTokenBalances"
        },
        
        # Transaction History Tool
        {
            "name": "transaction_tool",
            "function": {
                "description": "Fetches recent transaction history for the wallet",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "limit": {
                            "type": "integer",
                            "description": "Number of transactions to fetch (max 10, default 5)"
                        },
                        "rpc_url": {
                            "type": "string",
                            "description": "Solana RPC endpoint (default: mainnet)"
                        }
                    }
                }
            },
            "class": "solana.transactions.GetTransactions"
        },
        
        # NFT Discovery Tool
        {
            "name": "nft_tool",
            "function": {
                "description": "Discovers NFTs owned by the wallet",
                "parameters": {
                    "type": "object",
                    "properties": {
                        "rpc_url": {
                            "type": "string",
                            "description": "Solana RPC endpoint (default: mainnet)"
                        }
                    }
                }
            },
            "class": "solana.nfts.GetNFTs"
        }
    ]
}
